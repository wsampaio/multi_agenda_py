<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <meta content="text/html; charset=UTF-8" http-equiv="content-type">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>tipoCampoCmb</title>
        <script src="/html/btp/jquery.js"></script>

        <script>

            function preencheTipoCampoCmb(cod){
                var saida = "";

                $.getJSON("/cgi-bin/passmots/tipoCampoLista.py", function(data) {

                    //console.log(data);

                    var lista = data.tiposCampos;

                    for (i = 0; i < lista.length; i++) {

                        saida += "<option value='" + lista[i].codTipoCampo + "'";
                    
                        if (lista[i].codTipoCampo == cod){
                            saida += " selected";
                        }
                        
                        saida += ">";
                        saida += 
                            lista[i].tipoCampo.substring(0, 30) + 
                            "</option>";

                        //saida += "<td class='col1'>" + tarefas[i].codTarefaPai + "</td>"

                    }
                    
                    $("#tipoCampoCmb").append(saida);
                    $("#loadTipoCampoCmb").css("display", "none");
                });
            }
            
            $(document).ready(function () {
                
                var variavel = 0;
                
                let params = decodeURI($("#tipoCampoCmb").parent().parent().attr('param'));
                let searchParams = new URLSearchParams(params);
                
                if (searchParams.has("cod")){
                    variavel = searchParams.get("cod");
                }
                
                if (searchParams.has("lbl")){
                    $("#tipoCampoLbl").html(searchParams.get("lbl"));
                }
                
                if (searchParams.has("cmp")){
                    $("#tipoCampoCmb").attr("name", searchParams.get("cmp"));
                }
                
                preencheTipoCampoCmb(variavel);
                
            });
        
        </script>

    </head>
    <body>
        <div class="container">
            <label for="codTipoCampo">
                <span id="tipoCampoLbl">
                    Tipo Campo
                </span>
            </label>
            <select id="tipoCampoCmb" name="codTipoCampo">
                <option value='0'>Selecione:</option>
            </select>
            <div id='loadTipoCampoCmb'>
                <img src="/html/img/load21.gif" height="10">
            </div>
        </div>
    </body>
</html>



